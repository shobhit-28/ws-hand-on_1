<div class="flex justify-between items-center px-8 xl:px-4 md:px-0">
    <div class="flex items-center justify-center border-0 rounded-full h-[12rem] w-[12rem] overflow-hidden md:h-40 md:w-40 sm:h-20 sm:w-20">
        @if (loader.profile_pic) {
        <raj-chat-loader></raj-chat-loader>
        }@else {
        <img class="w-full h-full object-cover" [src]="imgUrl" alt="" srcset="">
        }
    </div>
    <div class="flex flex-col gap-4">
        <div class="flex items-center text-lg cursive-font justify-between gap-6 md:text-base sm:text-sm md:gap-4">
            <p>{{user.userDetails.email}}</p>
            <button class="border py-1 px-2 sm:px-1 rounded-md text-[0.9rem]" (click)="profileBtnClick()"
                [matMenuTriggerFor]="isMyAccount() ? menu : null" #menuTrigger>
                {{isMyAccount() ? 'Edit Profile' : user.status.isAlreadyFollowing ? 'Unfollow' :
                user.status.isGettingFollowed ? 'Follow Back' : 'Follow'}}
            </button>
            @if (!isMyAccount() && user.status.isAlreadyFollowing && user.status.isGettingFollowed) {
            <button class="flex items-center justify-center">
                <mat-icon aria-hidden="false" aria-label="Example home icon" fontIcon="chat"
                    (click)="messageThisUser()"></mat-icon>
            </button>
            }
            <button class="flex items-center justify-center">
                <mat-icon aria-hidden="false" aria-label="Example home icon" fontIcon="share"
                    (click)="copyUrl()"></mat-icon>
            </button>
        </div>
        <div class="flex justify-between">
            <p class="flex gap-1">
                <span class="font-medium">{{user.posts.length}}</span>
                <span class="text-black/70 cursive-font">
                    {{user.posts.length === 1 ? 'post' : 'posts'}}
                </span>
            </p>
            <p class="flex gap-1">
                <span class="font-medium">{{user.followers.length}}</span>
                <span class="text-black/70 cursive-font">
                    {{user.followers.length === 1 ? 'follower' : 'followers'}}
                </span>
            </p>
            <p class="flex gap-1">
                <span class="font-medium">{{user.following.length}}</span>
                <span class="text-black/70 cursive-font">following</span>
            </p>
        </div>
        <div class="flex flex-col gap-1 cursive-font">
            <p class="">{{user.userDetails.name}}</p>
            <p class="">{{ user.userDetails.bio ? user.userDetails.bio : '' }}</p>
        </div>
    </div>
</div>

<mat-menu #menu="matMenu">
    <button mat-menu-item (click)="addProfilePic()">
        Profile Picture
    </button>
    <button mat-menu-item (click)="editMyAccount()">
        Profile Details
    </button>
</mat-menu>
